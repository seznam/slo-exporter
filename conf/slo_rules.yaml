# !!! ATTENTION !!!
# Production copy of this configuration is maintained within the actual slo-exporter deployment
# e.g. for userportal, it is located at https://gitlab.seznam.net/sklik-frontend/Proxies/tree/master/userproxy/conf/slo-exporter
#
rules:
  - event_type: request
    slo_matcher:
      domain: userportal
    failure_criteria:
      - criterium: requestStatusHigherThan
        value: 499
    additional_metadata:
      slo_type: availability
      slo_version: 6
    # if evaluated event's sloResult attribute is nonempty, use its content to determine the event's result (ignoring all failure_criteria)
    # if value equals event.Result's success value -> event is considered as succesful
    # otherwise, event is considered as failed
    # if evaluated event's sloResult attribute is empty, failure_criteria are evaluted and events's result is set based on them.
    honor_slo_result: True

  - event_type: request
    slo_matcher:
      domain: userportal
      class: critical
    failure_criteria:
      - criterium: requestDurationHigherThan
        value: 0.8s
    additional_metadata:
      slo_version: 6
      slo_type: latency90
      percentile: 90
      le: 0.8


  - event_type: request
    slo_matcher:
      domain: userportal
      class: critical
    failure_criteria:
      - criterium: requestDurationHigherThan
        value: 6.0s
    additional_metadata:
      slo_version: 6
      slo_type: latency99
      percentile: 99
      le: 6.0


  - event_type: request
    slo_matcher:
      domain: userportal
      class: high_fast
    failure_criteria:
      - criterium: requestDurationHigherThan
        value: 8.0s
    additional_metadata:
      slo_version: 6
      slo_type: latency90
      percentile: 90
      le: 8.0


  - event_type: request
    slo_matcher:
      domain: userportal
      class: high_fast
    failure_criteria:
      - criterium: requestDurationHigherThan
        value: 12.0s
    additional_metadata:
      slo_version: 6
      slo_type: latency99
      percentile: 99
      le: 12.0

  - event_type: request
    slo_matcher:
      domain: userportal
      class: high_slow
    failure_criteria:
      - criterium: requestDurationHigherThan
        value: 8.0s
    additional_metadata:
      slo_version: 6
      slo_type: latency90
      percentile: 90
      le: 8.0

  - event_type: request
    slo_matcher:
      domain: userportal
      class: high_slow
    failure_criteria:
      - criterium: requestDurationHigherThan
        value: 32.0s
    additional_metadata:
      slo_version: 6
      slo_type: latency99
      percentile: 99
      le: 32.0


  - event_type: request
    slo_matcher:
      domain: userportal
      class: low
    failure_criteria:
      - criterium: requestDurationHigherThan
        value: 16.0s
    additional_metadata:
      slo_version: 6
      slo_type: latency90
      percentile: 90
      le: 16.0


  - event_type: request
    slo_matcher:
      domain: userportal
      class: low
    failure_criteria:
      - criterium: requestDurationHigherThan
        value: 32.0s
    additional_metadata:
      slo_version: 6
      slo_type: latency99
      percentile: 99
      le: 32.0
